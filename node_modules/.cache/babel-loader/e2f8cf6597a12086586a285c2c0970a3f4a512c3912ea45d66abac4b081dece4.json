{"ast":null,"code":"import _objectSpread from\"/Users/kle1/progs/React/QueryBuilder3/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/kle1/progs/React/QueryBuilder3/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import ReactGA from'react-ga';import QuerySelector from'./QuerySelector.jsx';import StnMetaInput from'./StnMetaInput.jsx';import StnDataInput from'./StnDataInput.jsx';import MultiStnDataInput from'./MultiStnDataInput.jsx';import StnHourlyInput from'./StnHourlyInput.jsx';import GridDataInput from'./GridDataInput.jsx';import GridData2Input from'./GridData2Input.jsx';import GeneralInput from'./GeneralInput.jsx';import Output from'./Output';import HelpTable from'./HelpTable';import Footer from'./Footer.jsx';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var acis_servers={StnMeta:\"https://data.rcc-acis.org/StnMeta\",StnData:\"https://data.rcc-acis.org/StnData\",MultiStnData:\"https://data.rcc-acis.org/MultiStnData\",GridData:\"https://data.rcc-acis.org/GridData\",GridData2:\"https://grid2.rcc-acis.org/GridData\",StnHourly:\"https://data.nrcc.rcc-acis.org/StnData\",General:\"https://data.rcc-acis.org/General/\"};var _useState=useState('StnData'),_useState2=_slicedToArray(_useState,2),wstype=_useState2[0],setWstype=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),input_params=_useState4[0],setInput_params=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),generalArea=_useState6[0],setGeneralArea=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),helpFor=_useState8[0],setHelpFor=_useState8[1];var _useState9=useState('Any'),_useState10=_slicedToArray(_useState9,2),server=_useState10[0],setServer=_useState10[1];var _useState11=useState(acis_servers[wstype]),_useState12=_slicedToArray(_useState11,2),acisServerUrl=_useState12[0],setAcisServerUrl=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),hasParamsError=_useState14[0],setHasParamsError=_useState14[1];// Google Analytics\nuseEffect(function(){ReactGA.initialize('UA-47226172-1');ReactGA.pageview('Builder-pageview');},[]);// update url of server whenever the wstype or specific server selections change\nuseEffect(function(){var serverurl=acis_servers[wstype];var rccindex=serverurl.indexOf('data.rcc-acis');if(rccindex!==-1&&server!=='Any'){serverurl=\"\".concat(serverurl.slice(0,rccindex+4),\".\").concat(server.toLowerCase()).concat(serverurl.slice(rccindex+4));}setAcisServerUrl(serverurl);// eslint-disable-next-line\n},[wstype,server]);var handleQueryChange=function handleQueryChange(value){setWstype(value);setInput_params({});setGeneralArea('');setHelpFor('');};var handleInputStringChange=function handleInputStringChange(inputString){if(inputString.length>0){try{setInput_params(JSON.parse(inputString));setHasParamsError(false);}catch(_unused){setHasParamsError(true);}}};var updateInputParams=function updateInputParams(changes){var new_input_params=input_params;Object.keys(changes).forEach(function(key){var value=changes[key];if(value||typeof value==='object'&&Object.keys(value).length>0){new_input_params[key]=value;}else{delete new_input_params[key];}});setInput_params(_objectSpread({},new_input_params));setHasParamsError(false);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(QuerySelector,{query_types:Object.keys(acis_servers),wstype:wstype,handleChange:handleQueryChange}),wstype===\"StnMeta\"&&/*#__PURE__*/_jsx(StnMetaInput,{updateInputParams:updateInputParams,updateHelpFor:setHelpFor,input_params:input_params}),wstype===\"StnData\"&&/*#__PURE__*/_jsx(StnDataInput,{updateInputParams:updateInputParams,updateHelpFor:setHelpFor,input_params:input_params}),wstype===\"MultiStnData\"&&/*#__PURE__*/_jsx(MultiStnDataInput,{updateInputParams:updateInputParams,updateHelpFor:setHelpFor,input_params:input_params}),wstype===\"StnHourly\"&&/*#__PURE__*/_jsx(StnHourlyInput,{updateInputParams:updateInputParams,updateHelpFor:setHelpFor,input_params:input_params}),wstype===\"GridData\"&&/*#__PURE__*/_jsx(GridDataInput,{updateInputParams:updateInputParams,updateHelpFor:setHelpFor,input_params:input_params}),wstype===\"GridData2\"&&/*#__PURE__*/_jsx(GridData2Input,{updateInputParams:updateInputParams,updateHelpFor:setHelpFor,input_params:input_params}),wstype===\"General\"&&/*#__PURE__*/_jsx(GeneralInput,{updateInputParams:updateInputParams,updateHelpFor:setHelpFor,updateGeneralArea:setGeneralArea,input_params:input_params}),helpFor&&/*#__PURE__*/_jsx(HelpTable,{id:helpFor}),/*#__PURE__*/_jsx(Output,{input_params:input_params,changedInput:handleInputStringChange,generalArea:generalArea,acisServer:acisServerUrl,server:server,hasParamsError:hasParamsError}),wstype!=='StnHourly'&&wstype!=='GridData2'&&/*#__PURE__*/_jsx(Footer,{server:server,updateServer:setServer})]});};export default App;","map":{"version":3,"names":["React","useEffect","useState","ReactGA","QuerySelector","StnMetaInput","StnDataInput","MultiStnDataInput","StnHourlyInput","GridDataInput","GridData2Input","GeneralInput","Output","HelpTable","Footer","App","acis_servers","StnMeta","StnData","MultiStnData","GridData","GridData2","StnHourly","General","wstype","setWstype","input_params","setInput_params","generalArea","setGeneralArea","helpFor","setHelpFor","server","setServer","acisServerUrl","setAcisServerUrl","hasParamsError","setHasParamsError","initialize","pageview","serverurl","rccindex","indexOf","slice","toLowerCase","handleQueryChange","value","handleInputStringChange","inputString","length","JSON","parse","updateInputParams","changes","new_input_params","Object","keys","forEach","key"],"sources":["/Users/kle1/progs/React/QueryBuilder3/src/App.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport ReactGA from 'react-ga'\nimport QuerySelector from './QuerySelector.jsx'\nimport StnMetaInput from './StnMetaInput.jsx'\nimport StnDataInput from './StnDataInput.jsx'\nimport MultiStnDataInput from './MultiStnDataInput.jsx'\nimport StnHourlyInput from './StnHourlyInput.jsx'\nimport GridDataInput from './GridDataInput.jsx'\nimport GridData2Input from './GridData2Input.jsx'\nimport GeneralInput from './GeneralInput.jsx'\nimport Output from './Output'\nimport HelpTable from './HelpTable'\nimport Footer from './Footer.jsx'\n\nconst App = () => {\n  const acis_servers = {\n    StnMeta: \"https://data.rcc-acis.org/StnMeta\",\n    StnData: \"https://data.rcc-acis.org/StnData\",\n    MultiStnData: \"https://data.rcc-acis.org/MultiStnData\",\n    GridData: \"https://data.rcc-acis.org/GridData\",\n    GridData2: \"https://grid2.rcc-acis.org/GridData\",\n    StnHourly: \"https://data.nrcc.rcc-acis.org/StnData\",\n    General: \"https://data.rcc-acis.org/General/\",\n  }\n\n  const [wstype, setWstype] = useState('StnData')\n  const [input_params, setInput_params] = useState({})\n  const [generalArea, setGeneralArea] = useState('')\n  const [helpFor, setHelpFor] = useState()\n  const [server, setServer] = useState('Any')\n  const [acisServerUrl, setAcisServerUrl] = useState(acis_servers[wstype])\n  const [hasParamsError, setHasParamsError] = useState(false)\n  \n  // Google Analytics\n  useEffect(() => {\n    ReactGA.initialize('UA-47226172-1')\n    ReactGA.pageview('Builder-pageview')    \n  }, [])\n\n  // update url of server whenever the wstype or specific server selections change\n  useEffect(() => {\n      let serverurl = acis_servers[wstype]\n      const rccindex = serverurl.indexOf('data.rcc-acis')\n      if (rccindex !== -1 && server !== 'Any') {\n        serverurl = `${serverurl.slice(0,rccindex+4)}.${server.toLowerCase()}${serverurl.slice(rccindex+4)}`\n      }\n      setAcisServerUrl(serverurl)\n      // eslint-disable-next-line\n  }, [wstype, server])\n\n  const handleQueryChange = (value) => {\n    setWstype(value)\n    setInput_params({})\n    setGeneralArea('')\n    setHelpFor('')\n  }\n\n  const handleInputStringChange = (inputString) => {\n    if (inputString.length > 0) {\n      try {\n        setInput_params(JSON.parse(inputString))\n        setHasParamsError(false)\n      } catch {\n        setHasParamsError(true)\n      }\n    }\n  }\n\n  const updateInputParams = (changes) => {\n    let new_input_params = input_params\n    Object.keys(changes).forEach((key) => {\n      const value = changes[key]\n      if (value || (typeof value === 'object' && Object.keys(value).length > 0)) {\n        new_input_params[key] = value\n      } else {\n        delete new_input_params[key]\n      }\n    })\n    setInput_params({ ...new_input_params })\n    setHasParamsError(false)\n  }\n\n  return (\n    <div>\n      <QuerySelector\n        query_types={Object.keys(acis_servers)}\n        wstype={wstype}\n        handleChange={handleQueryChange}\n      />\n      {wstype === \"StnMeta\" && \n        <StnMetaInput \n          updateInputParams={updateInputParams}\n          updateHelpFor={setHelpFor}\n          input_params={input_params}\n        />\n      }\n      {wstype === \"StnData\" && \n        <StnDataInput \n          updateInputParams={updateInputParams}\n          updateHelpFor={setHelpFor}\n          input_params={input_params}\n        />\n      }\n      {wstype === \"MultiStnData\" && \n        <MultiStnDataInput \n          updateInputParams={updateInputParams}\n          updateHelpFor={setHelpFor}\n          input_params={input_params}\n        />\n      }\n      {wstype === \"StnHourly\" && \n        <StnHourlyInput \n          updateInputParams={updateInputParams}\n          updateHelpFor={setHelpFor}\n          input_params={input_params}\n        />\n      }\n      {wstype === \"GridData\" && \n        <GridDataInput \n          updateInputParams={updateInputParams}\n          updateHelpFor={setHelpFor}\n          input_params={input_params}\n        />\n      }\n      {wstype === \"GridData2\" && \n        <GridData2Input \n          updateInputParams={updateInputParams}\n          updateHelpFor={setHelpFor}\n          input_params={input_params}\n        />\n      }\n      {wstype === \"General\" && \n        <GeneralInput \n          updateInputParams={updateInputParams}\n          updateHelpFor={setHelpFor}\n          updateGeneralArea={setGeneralArea}\n          input_params={input_params}\n        />\n      }\n      {helpFor && \n        <HelpTable \n          id={helpFor}\n        /> \n      }\n      <Output\n        input_params={input_params} \n        changedInput={handleInputStringChange}\n        generalArea={generalArea}\n        acisServer={acisServerUrl}\n        server={server}\n        hasParamsError={hasParamsError}\n      />\n      {wstype !== 'StnHourly' && wstype !== 'GridData2' &&\n        <Footer \n          server={server}\n          updateServer={setServer}\n        />\n      }\n    </div>\n  )\n}\n\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}